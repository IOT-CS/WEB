(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-17990a5c"],{"2ea0":function(e,t,i){"use strict";i("590e")},"590e":function(e,t,i){},"951c":function(e,t,i){"use strict";i.r(t);i("6b54"),i("a481"),i("7f7f");var r={data:function(){return{currentPage:1,pagesize:10,driveList:[],dialogFormVisible:!1,driveType:[{Id:"01",driveType:"OPCUA"}],formData:{Id:"",DriveName:"",DriveType:"",DriveParams:"",Description:""},formType:"",queryString:"",labelPosition:"left",rules:{DriveName:[{required:!0,message:"驱动名称不能为空",trigger:"blur"},{min:0,max:20,message:"长度不能超过20字符",trigger:"blur"}],DriveType:[{required:!0,message:"驱动类型不能为空",trigger:"blur"}]},dialogTitle:""}},components:{},methods:{selectRow:function(e,t,i){this.name=e.name},rowStyle:function(e){var t=e.row;return this.name===t.name?{"background-color":"rgb(255,255,255)",cursor:"pointer"}:{cursor:"pointer"}},handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},closeDialog:function(){this.dialogFormVisible=!1},handleEdit:function(e,t){this.dialogTitle="编辑驱动",this.formData=t,this.formType="edit",this.dialogFormVisible=!0},handleDelete:function(e,t){var i=this;this.$confirm("确定要删除当前驱动?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){i.$post("drive/data/delete",{Id:t.Id}).then((function(e){e.Successful?(i.initData(),i.$Message.success({message:"数据删除成功！",duration:800})):i.$Message.error({message:"存在设备关联数据，删除失败！",duration:800})}))})).catch((function(){}))},deleteRow:function(e,t){},addOpcua:function(){this.dialogTitle="创建驱动",this.formData={Id:"",DriveName:"",DriveType:"",DriveParams:"",Description:""},this.formType="add",this.dialogFormVisible=!0},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)},handleIconClick:function(e){console.log(e)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"==t.formType?(t.formData.Id=t.uuid(),t.$post("drive/data/insert",t.formData).then((function(e){e.Successful?(t.initData(),t.closeDialog(),t.$Message.success({message:"数据配置成功！",duration:800})):t.$Message.error({message:e.ErrorMessage,duration:800})})).catch((function(){}))):t.$post("drive/data/update",t.formData).then((function(e){e.Successful?(t.initData(),t.closeDialog(),t.$Message.success({message:"数据配置成功！",duration:800})):t.$Message.error({message:e.ErrorMessage,duration:800})}))}))},resetForm:function(e){this.$refs[e].resetFields()},initData:function(){var e=this;this.$get("drive/data/getAllDrive").then((function(t){t.Successful?e.driveList=t.Data:e.$Message.error({message:t.ErrorMessage,duration:800})}))}},mounted:function(){this.initData()}},a=(i("2ea0"),i("2877")),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"div_opcua"},[i("el-button",{attrs:{size:"small",icon:"el-icon-plus",title:"添加"},on:{click:e.addOpcua}},[e._v("新建\n\t")]),i("div",{staticClass:"div_opcuaTables"},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%",height:"97%",cursor:"pointer"},attrs:{"highlight-current-row":"",size:"mini",stripe:"",data:e.driveList,"tooltip-effect":"dark","default-sort":{prop:"date",order:"descending"},"row-style":e.rowStyle},on:{"row-click":e.selectRow}},[i("el-table-column",{attrs:{type:"index",label:"序号",sortable:"",width:"180"}}),i("el-table-column",{attrs:{prop:"DriveName",label:"驱动名称"}}),i("el-table-column",{attrs:{prop:"DriveType",label:"驱动类型"}}),i("el-table-column",{attrs:{prop:"Description",label:"备注"}}),i("el-table-column",{attrs:{prop:"CreaterBy",label:"创建人"}}),i("el-table-column",{attrs:{prop:"CreateTime",label:"创建日期"}}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{color:"rgb(64,158,255)"},attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{staticStyle:{color:"rgb(247,137,137)"},attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e.dialogFormVisible?i("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],attrs:{visible:e.dialogFormVisible,"append-to-body":!0,width:"520px","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[i("span",{domProps:{innerHTML:e._s(e.dialogTitle)}})]),i("el-form",{ref:"formID",staticClass:"demo-form",staticStyle:{margin:"0 30px"},attrs:{model:e.formData,rules:e.rules,"label-position":e.labelPosition,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"驱动名称",prop:"DriveName"}},[i("el-input",{model:{value:e.formData.DriveName,callback:function(t){e.$set(e.formData,"DriveName",t)},expression:"formData.DriveName"}})],1),i("el-form-item",{attrs:{label:"驱动类型",prop:"DriveType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.DriveType,callback:function(t){e.$set(e.formData,"DriveType",t)},expression:"formData.DriveType"}},e._l(e.driveType,(function(e){return i("el-option",{key:e.Id,attrs:{label:e.driveType,value:e.driveType}})})),1)],1),i("el-form-item",{attrs:{label:"备注",prop:"Description"}},[i("el-input",{model:{value:e.formData.Description,callback:function(t){e.$set(e.formData,"Description",e._n(t))},expression:"formData.Description"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formID")}}},[e._v("确定")]),i("el-button",{on:{click:e.closeDialog}},[e._v("取消")])],1)],1)],1):e._e()],1)],1)}),[],!1,null,"444ebf40",null);t.default=o.exports}}]);