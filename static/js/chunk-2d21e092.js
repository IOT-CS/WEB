(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d21e092"],{d49e:function(e,n,t){"use strict";t.r(n);t("5df3"),t("4f7f");var i=t("2909"),o=(t("ac6a"),t("b76a")),a={left:-1,top:-1},c={data:function(){return{activeNames:"1",draggableOptions:{preventOnFilter:!1,sort:!1,disabled:!1,ghostClass:"tt",forceFallback:!0},defaultOpeneds:["1","2"],checkChildren:[{id:"21",type:"MySQL",name:"MySQL",ico:"el-icon-caret-right"},{id:"22",type:"Redis",name:"Redis单节点模式",ico:"el-icon-caret-right"},{id:"23",type:"Cassandra",name:"Cassandra",ico:"el-icon-caret-right"},{id:"24",type:"PostgreSQL",name:"PostgreSQL",ico:"el-icon-caret-right"},{id:"25",type:"TDengine",name:"TDengine",ico:"el-icon-shopping-cart-full"},{id:"26",type:"RabbitMQ",name:"RabbitMQ",ico:"el-icon-shopping-cart-full"},{id:"27",type:"Kafka",name:"Kafka",ico:"el-icon-shopping-cart-full"},{id:"28",type:"Pulsar",name:"Pulsar",ico:"el-icon-shopping-cart-full"}],menuList:[{id:"1",type:"group",name:"过滤节点",ico:"el-icon-video-play",open:!0,children:[{id:"11",type:"node_field_filter",name:"数据字段筛选",ico:"el-icon-odometer"},{id:"12",type:"node_message_topic",name:"消息主题类型筛选",ico:"el-icon-odometer"},{id:"13",type:"node_message_separate",name:"消息类型分选",ico:"el-icon-odometer"},{id:"14",type:"node_message_shell",name:"python脚本",ico:"el-icon-odometer"}]},{id:"2",type:"group",name:"资源节点",ico:"el-icon-video-pause",open:!0,children:[]}],nodeMenu:{}}},components:{draggable:t.n(o).a},created:function(){this.isFirefox()&&(document.body.ondrop=function(e){a.left=e.layerX,a.top=e.clientY-50,e.preventDefault(),e.stopPropagation()})},mounted:function(){this.initData()},methods:{getMenuByType:function(e){for(var n=0;n<this.menuList.length;n++)for(var t=this.menuList[n].children,i=0;i<t.length;i++)if(t[i].type===e)return t[i]},move:function(e,n,t,i){var o=e.item.attributes.type.nodeValue;this.nodeMenu=this.getMenuByType(o)},end:function(e,n){this.$emit("addNode",e,this.nodeMenu,a)},isFirefox:function(){return navigator.userAgent.indexOf("Firefox")>-1},initData:function(){var e=this;this.$post("resource/data/get").then((function(n){if(n.Successful){var t=[];n.Data&&(n.Data.forEach((function(n){e.checkChildren.forEach((function(e){e&&n.ResourceType==e.type&&t.push(e)}))})),t=Object(i.a)(new Set(t))),e.menuList[1].children=t}}))}}},s=t("2877"),r=Object(s.a)(c,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"tool",staticClass:"flow-menu"},e._l(e.menuList,(function(n){return t("div",{key:n.id},[t("span",{staticClass:"ef-node-pmenu",on:{click:function(e){n.open=!n.open}}},[t("i",{class:{"el-icon-caret-bottom":n.open,"el-icon-caret-right":!n.open}}),e._v("\n       "+e._s(n.name)+"\n    ")]),t("ul",{directives:[{name:"show",rawName:"v-show",value:n.open,expression:"menu.open"}],staticClass:"ef-node-menu-ul"},[t("draggable",{attrs:{options:e.draggableOptions},on:{end:e.end,start:e.move},model:{value:n.children,callback:function(t){e.$set(n,"children",t)},expression:"menu.children"}},e._l(n.children,(function(n){return t("li",{key:n.id,staticClass:"ef-node-menu-li",style:n.style,attrs:{type:n.type}},[t("i",{class:n.ico}),e._v("\n          "+e._s(n.name)+"\n        ")])})),0)],1)])})),0)}),[],!1,null,"3a3eb0c8",null);n.default=r.exports}}]);