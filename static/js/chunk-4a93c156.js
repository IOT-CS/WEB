(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a93c156"],{"59ed":function(e,t,a){},afb7:function(e,t,a){"use strict";a("59ed")},de73:function(e,t,a){"use strict";a.r(t);a("6b54"),a("a481"),a("7f7f");var r={data:function(){return{currentPage:1,pagesize:10,userList:[],dialogFormVisible:!1,formData:{},formType:"",queryString:"",labelPosition:"left",rules:{UserName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],Password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},dialogTitle:""}},components:{},methods:{selectRow:function(e,t,a){this.name=e.name},rowStyle:function(e){var t=e.row;return this.name===t.name?{"background-color":"rgb(255,255,255)",cursor:"pointer"}:{cursor:"pointer"}},handleSizeChange:function(e){this.pagesize=e,console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,console.log(this.currentPage)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},closeDialog:function(){this.dialogFormVisible=!1},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除当前用户?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){a.$post("user/data/delete",{Id:t.Id,UserName:t.UserName}).then((function(e){e.Successful?(a.initData(),a.$Message.success({message:"数据配置成功！",duration:800})):a.$Message.error({message:e.ErrorMessage,duration:800})}))})).catch((function(){}))},deleteRow:function(e,t){},addOpcua:function(){this.dialogTitle="创建用户",this.formData={},this.formType="add",this.dialogFormVisible=!0},querySearch:function(){if(this.queryString){var e={OpcName:this.queryString};this.$post("opc/data/get",e).then((function(e){e.Successful}))}},handleSelectInput:function(){},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){console.log(e)},handleIconClick:function(e){console.log(e)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;"add"==t.formType?(t.formData.Id=t.uuid(),t.$post("user/data/insert",t.formData).then((function(e){e.Successful?(t.initData(),t.closeDialog(),t.$Message.success({message:"数据配置成功！",duration:800})):t.$Message.error({message:e.ErrorMessage,duration:800})}))):t.$post("drive/data/update",t.formData).then((function(e){e.Successful?(t.initData(),t.closeDialog(),t.$Message.success({message:"数据配置成功！",duration:800})):t.$Message.error({message:e.ErrorMessage,duration:800})}))}))},resetForm:function(e){this.$refs[e].resetFields()},initData:function(){var e=this;this.$get("user/data/getUsers").then((function(t){t.Successful?e.userList=t.Data:e.$Message.error({message:t.ErrorMessage,duration:800})}))}},mounted:function(){this.initData()}},o=(a("afb7"),a("2877")),s=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div_user"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",title:"添加"},on:{click:e.addOpcua}},[e._v("新建\n\t")]),a("div",{staticClass:"div_userTables"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%",height:"97%",cursor:"pointer"},attrs:{"highlight-current-row":"",size:"mini",stripe:"",data:e.userList,"tooltip-effect":"dark","default-sort":{prop:"date",order:"descending"},"row-style":e.rowStyle},on:{"row-click":e.selectRow}},[a("el-table-column",{attrs:{type:"index",label:"序号",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"UserName",label:"用户名"}}),a("el-table-column",{attrs:{prop:"DisplayName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"PhoneNumber",label:"手机号"}}),a("el-table-column",{attrs:{prop:"Creator",label:"创建人"}}),a("el-table-column",{attrs:{prop:"CreateTime",label:"创建日期"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{color:"rgb(247,137,137)"},attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e.dialogFormVisible?a("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],attrs:{visible:e.dialogFormVisible,"append-to-body":!0,width:"520px","modal-append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[a("span",{domProps:{innerHTML:e._s(e.dialogTitle)}})]),a("el-form",{ref:"formID",staticClass:"demo-form",staticStyle:{margin:"0 30px"},attrs:{model:e.formData,rules:e.rules,"label-position":e.labelPosition,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"UserName"}},[a("el-input",{model:{value:e.formData.UserName,callback:function(t){e.$set(e.formData,"UserName",t)},expression:"formData.UserName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"Password"}},[a("el-input",{model:{value:e.formData.Password,callback:function(t){e.$set(e.formData,"Password",t)},expression:"formData.Password"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"DisplayName"}},[a("el-input",{model:{value:e.formData.DisplayName,callback:function(t){e.$set(e.formData,"DisplayName",t)},expression:"formData.DisplayName"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"PhoneNumber"}},[a("el-input",{model:{value:e.formData.PhoneNumber,callback:function(t){e.$set(e.formData,"PhoneNumber",e._n(t))},expression:"formData.PhoneNumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("formID")}}},[e._v("确定")]),a("el-button",{on:{click:e.closeDialog}},[e._v("取消")])],1)],1)],1):e._e()],1)],1)}),[],!1,null,"42775081",null);t.default=s.exports}}]);